function ControlVideosRedesInicio(){const e=document.querySelectorAll("#Rec2 video, #Rec3 video"),t=new IntersectionObserver((e,t)=>{e.forEach(e=>{const o=e.target;e.isIntersecting&&(o.paused&&!o.dataset.reproducido&&(o.play(),o.dataset.reproducido="true"),t.unobserve(o),o.addEventListener("ended",()=>{}))})},{root:null,rootMargin:"0px",threshold:.6});e.forEach(e=>{t.observe(e)})}function iniciarAnimacionesCifras(){const e=document.querySelectorAll(".animacionCifras"),t=document.querySelectorAll(".TexCif");if(0===e.length&&0===t.length)return void console.log("No se encontraron elementos .animacionCifras o .TexCif");e.forEach(e=>{e.style.animation="none",e.classList.remove("ya-animado")}),t.forEach(e=>{e.style.animation="none",e.classList.remove("ya-animado")});const o=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting&&!e.target.classList.contains("ya-animado")){if(console.log("Animando elemento:",e.target.className),e.target.classList.contains("animacionCifras")){e.target.style.animation="animacionNumerosNos 0.8s forwards";const t=e.target.closest("article");if(t){const e=t.querySelector(".TexCif");e&&!e.classList.contains("ya-animado")&&setTimeout(()=>{e.style.animation="animacionTextoNos 0.8s forwards",e.classList.add("ya-animado")},300)}}if(e.target.classList.contains("TexCif")){const t=e.target.closest("article");if(t){const o=t.querySelector(".animacionCifras");o&&o.classList.contains("ya-animado")&&(e.target.style.animation="animacionTextoNos 0.8s forwards")}}e.target.classList.add("ya-animado"),o.unobserve(e.target)}})},{root:null,rootMargin:"-50px 0px",threshold:.3});e.forEach(e=>{o.observe(e)}),t.forEach(e=>{o.observe(e)})}function Carrusel_Flayers_Inicio(){const e=document.querySelector(".flayers-track-container");if(!e)return;if(!document.querySelector(".flayers-track"))return;const t=Array.from(document.querySelectorAll(".flayers-slide"));if(0===t.length)return;const o=document.querySelector(".flayers-indicators"),n=document.getElementById("flayersPrevBtn"),r=document.getElementById("flayersNextBtn");o.innerHTML="";let a,s,c=0,i=!1,l=!1;function d(e){t.forEach((t,o)=>{const n=t.querySelector(".video-portada");n&&(o===e?n.play().catch(e=>{console.log("Error al reproducir video:",e)}):n.pause())})}function u(o){o<0?o=t.length-1:o>=t.length&&(o=0),c=o;document.querySelectorAll(".flayers-indicator").forEach((e,t)=>{e.classList.toggle("active",t===o)});const n=t[o],r=n.offsetLeft-(e.offsetWidth-n.offsetWidth)/2;i=!0,e.scrollTo({left:r,behavior:"smooth"}),d(o),setTimeout(()=>{i=!1},500)}function f(){if(i||l)return;const o=e.offsetWidth/2,n=e.scrollLeft;let r=0,a=1/0;if(t.forEach((e,t)=>{const s=e.offsetLeft+e.offsetWidth/2-n,c=Math.abs(o-s);c<a&&(a=c,r=t)}),r!==c){c=r;document.querySelectorAll(".flayers-indicator").forEach((e,t)=>{e.classList.toggle("active",t===c)}),d(c)}}function m(e=8e3){window.flayersCarouselInterval&&clearInterval(window.flayersCarouselInterval),window.flayersCarouselInterval=setTimeout(()=>{l||(u(c+1),m(e))},e)}t.forEach((e,t)=>{const n=document.createElement("div");n.classList.add("flayers-indicator"),0===t&&n.classList.add("active"),n.addEventListener("click",()=>u(t)),o.appendChild(n)}),console.log("Flayers indicators created:",o.children.length),console.log("Flayers slides found:",t.length),n&&n.addEventListener("click",()=>{u(c-1)}),r&&r.addEventListener("click",()=>{u(c+1)}),e.addEventListener("touchstart",e=>{a=e.touches[0].clientX,l=!0,window.flayersCarouselInterval&&clearInterval(window.flayersCarouselInterval)},{passive:!0}),e.addEventListener("touchmove",e=>{l&&(s=e.touches[0].clientX)},{passive:!0}),e.addEventListener("touchend",e=>{if(!l)return;s=e.changedTouches[0].clientX;const t=a-s;Math.abs(t)>50?u(t>0?c+1:c-1):u(c),l=!1,m(8e3)},{passive:!0}),e.addEventListener("scroll",()=>{i||l||(clearTimeout(window.flayersScrollTimeout),window.flayersScrollTimeout=setTimeout(f,500))}),t.forEach(e=>{const t=e.querySelector(".video-portada");t&&t.pause()}),u(0),m(8e3)}document.addEventListener("DOMContentLoaded",function(){DesplegarUbicaciones(),VentanaConsultaPorID(),VerContra(),DesplegarChat(),initCarousel(),CambioContrasenamodal(),aplicarEstilosError(),animarMensajeRegistro(),ToggleMenuMobile(),CarruselNosotros(),AnimacionConteoUnete(),iniciarAnimacionesCifras(),manejarPreloader(),Carrusel_Flayers_Inicio(),ControlVideosRedesInicio()});let preloaderActive=!0,pageLoadStartTime=Date.now();function manejarPreloader(){preloaderActive&&forzarOcultarPreloader(),preloaderActive=!0,pageLoadStartTime=Date.now();const e=document.getElementById("preloader"),t=document.querySelector(".Imgblanca");e&&(e.style.opacity="1",e.style.display="flex",e.classList.remove("ocultando")),t&&(t.style.display="block"),document.body.style.overflow="hidden";const o=document.querySelector(".seccion-activa")||document.body,n=Array.from(o.querySelectorAll("img")),r=Array.from(o.querySelectorAll("video")),a=Array.from(o.querySelectorAll("iframe"));console.log(`Preloader iniciado: ${n.length} imágenes, ${r.length} videos, ${a.length} iframes`);let s=0;const c=n.length+r.length+a.length;if(0===c)return console.log("No hay elementos multimedia, ocultando preloader en 500ms"),void setTimeout(d,500);function i(){s++,console.log(`Elemento cargado: ${s}/${c}`),s>=c&&(console.log("Todos los elementos cargados, ocultando preloader"),d())}n.forEach((e,t)=>{e.complete?(console.log(`Imagen ${t} ya cargada`),i()):(console.log(`Esperando carga de imagen ${t}: ${e.src}`),e.addEventListener("load",()=>{console.log(`Imagen ${t} cargada: ${e.src}`),i()}),e.addEventListener("error",()=>{console.log(`Error al cargar imagen ${t}: ${e.src}`),i()}))}),r.forEach((e,t)=>{e.readyState>=3?(console.log(`Video ${t} ya cargado`),i()):(console.log(`Esperando carga de video ${t}: ${e.src}`),e.addEventListener("canplay",()=>{console.log(`Video ${t} puede reproducirse: ${e.src}`),i()}),e.addEventListener("error",()=>{console.log(`Error al cargar video ${t}: ${e.src}`),i()}))}),a.forEach((e,t)=>{console.log(`Esperando carga de iframe ${t}`),e.addEventListener("load",()=>{console.log(`Iframe ${t} cargado`),i()}),e.addEventListener("error",()=>{console.log(`Error al cargar iframe ${t}`),i()});try{e.contentDocument&&"complete"===e.contentDocument.readyState&&(console.log(`Iframe ${t} ya cargado`),i())}catch(e){console.log(`No se puede verificar iframe ${t} (seguridad): ${e.message}`),i()}});const l=setTimeout(()=>{d()},5e3);function d(){preloaderActive&&(clearTimeout(l),preloaderActive=!1,e&&!e.classList.contains("ocultando")?(e.classList.add("ocultando"),e.style.opacity="0",setTimeout(function(){console.log("Transición completada, ocultando elementos"),t?t.style.display="none":e&&(e.style.display="none"),document.body.style.overflow=""},300)):forzarOcultarPreloader())}}function forzarOcultarPreloader(){preloaderActive=!1;const e=document.getElementById("preloader"),t=document.querySelector(".Imgblanca");e&&(e.style.opacity="0",e.style.display="none"),t&&(t.style.display="none"),document.body.style.overflow=""}function AnimacionConteoUnete(){const e=document.querySelector(".Familias h3 span"),t=document.querySelector(".Familias h5");if(!e||!t)return;t.style.animation="none",t.style.opacity="0",t.style.transform="translate(-50%, 30px)";const o=2e3,n=2200;let r=!1;const a=e=>new Intl.NumberFormat("es-MX").format(Math.floor(e));e.textContent="0",function(){const s=new IntersectionObserver(c=>{c.forEach(c=>{c.isIntersecting&&(!function(){if(r)return;r=!0;const s=performance.now();t.style.animation="Aparecer 3000ms forwards",function t(){const r=performance.now()-s;if(r>=n)return void(e.textContent=a(o));const c=r/n,i=Math.min(o*c,o);e.textContent=a(i),requestAnimationFrame(t)}()}(),s.unobserve(c.target))})},{root:null,rootMargin:"0px",threshold:.2}),c=document.querySelector(".Familias");c&&s.observe(c)}()}function CambioContrasenamodal(){document.querySelectorAll(".toggle-password").forEach(e=>{e.replaceWith(e.cloneNode(!0))}),document.querySelectorAll(".toggle-password").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),function(e){const t=e.parentElement.querySelector("input"),o="password"===t.type;t.type=o?"text":"password",e.textContent=o?"🙈":"👁️"}(this)})});const e=document.getElementById("modalCambiarContrasena"),t=document.getElementById("botonCambiarContrasena"),o=e?e.querySelector(".cerrar-modal"):null;t&&e&&(t.onclick=function(){e.style.display="block"}),o&&e&&(o.onclick=function(){e.style.display="none"}),window.onclick=function(t){e&&t.target===e&&(e.style.display="none")}}function CarruselNosotros(){const e=document.querySelector(".carrusel-container");if(!e)return;let t=document.querySelector(".carrusel-slides-wrapper");if(!t){t=document.createElement("div"),t.className="carrusel-slides-wrapper";Array.from(e.querySelectorAll(".carrusel-slide")).forEach(o=>{e.removeChild(o),t.appendChild(o)}),e.appendChild(t)}const o=document.querySelectorAll(".carrusel-slide"),n=document.querySelectorAll(".indicador");if(!o.length||!n.length)return;let r,a,s,c=0,i=!1,l=!1;function d(e){e<0&&(e=o.length-1),e>=o.length&&(e=0),l||(l=!0,o.forEach((t,o)=>{t.classList.toggle("active",o===e)}),n.forEach((t,o)=>{t.classList.toggle("active",o===e)}),t.style.transform=`translateX(-${100*e}%)`,c=e,setTimeout(()=>{l=!1},500))}function u(){s&&clearInterval(s),s=setInterval(()=>{i||l||(c<o.length-1?d(c+1):d(0))},5200)}function f(){s&&clearInterval(s)}n.forEach((e,t)=>{e.addEventListener("click",()=>{f(),d(t),u()})}),e.addEventListener("touchstart",e=>{r=e.touches[0].clientX,i=!0,f()},{passive:!0}),e.addEventListener("touchmove",n=>{if(!i||l)return;a=n.touches[0].clientX;const s=r-a,d=s/e.offsetWidth;0===c&&d<0||c===o.length-1&&d>0?t.style.transform=`translateX(calc(-${100*c}% - ${.3*s}px))`:t.style.transform=`translateX(calc(-${100*c}% - ${s}px))`},{passive:!0}),e.addEventListener("touchend",n=>{if(!i)return;a=n.changedTouches[0].clientX;const s=r-a;if(l)return t.style.transform=`translateX(-${100*c}%)`,i=!1,void u();const f=Math.min(80,.2*e.offsetWidth);Math.abs(s)>f?s>0&&c<o.length-1?d(c+1):s<0&&c>0?d(c-1):t.style.transform=`translateX(-${100*c}%)`:t.style.transform=`translateX(-${100*c}%)`,i=!1,u()},{passive:!0}),e.addEventListener("mouseenter",()=>{f()}),e.addEventListener("mouseleave",()=>{u()}),t.style.transform="translateX(0)",o[0]&&o[0].classList.add("active"),n[0]&&n[0].classList.add("active"),u()}function aplicarEstilosError(){const e=document.querySelector(".alerta.error");if(e){const t=e.textContent.trim().toLowerCase(),o=document.getElementById("email-or-phone"),n=document.getElementById("password"),r=document.querySelector('label[for="email-or-phone"]'),a=document.querySelector('label[for="password"]'),s=document.querySelector(".Contenedor_contrasena");if(t.includes("usuario no existe")&&(o.classList.add("error-input"),r.classList.add("error-label"),o.addEventListener("input",function(){this.classList.remove("error-input"),r.classList.remove("error-label")})),t.includes("contraseña es incorrecta")&&(n.classList.add("error-input"),a.classList.add("error-label"),s.classList.add("error-container"),n.addEventListener("input",function(){this.classList.remove("error-input"),a.classList.remove("error-label"),s.classList.remove("error-container")})),t.includes("sesión ha expirado")){o.classList.add("error-input"),n.classList.add("error-input"),s.classList.add("error-container"),r.classList.add("error-label"),a.classList.add("error-label");const e=function(){o.classList.remove("error-input"),n.classList.remove("error-input"),r.classList.remove("error-label"),a.classList.remove("error-label"),s.classList.remove("error-container")};o.addEventListener("input",e),n.addEventListener("input",e)}}}function AnimacionesInsigniasUsuario(){function e(){const e=document.querySelector(".seccion-progresion"),t=document.querySelector(".seccion-insignias-especiales");if(!e&&!t)return console.log("Elementos de insignias no encontrados, esperando..."),!1;console.log("¡Elementos encontrados! Iniciando animaciones de insignias");const o=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const e=document.querySelectorAll('[data-nueva-insignia="true"]');if(e.length>0){console.log("Iniciando animaciones de insignias regulares:",e.length);new Audio("/Gifs_videos_media/audios/desbloqueo.mp3").play().catch(e=>{console.log("No se pudo reproducir el audio:",e)}),e.forEach((e,t)=>{setTimeout(()=>{const t=e.dataset.imagenOriginal;t&&(e.style.transition="opacity 0.3s ease, transform 0.3s ease",e.style.opacity="0",e.style.transform="scale(0.8)",setTimeout(()=>{e.src=t,e.classList.add("nueva-insignia"),e.style.opacity="1",e.style.transform="scale(1)";const o=e.closest(".insignia-contenedor");if(o){o.classList.add("nueva-insignia-contenedor");const e=o.querySelector(".confeti");e&&function(e){const t=["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff"];for(let o=0;o<50;o++){const o=document.createElement("div");o.className="confeti-pieza",o.style.backgroundColor=t[Math.floor(Math.random()*t.length)],o.style.left=100*Math.random()+"%",o.style.animationDelay=2*Math.random()+"s",o.style.animationDuration=3*Math.random()+2+"s",e.appendChild(o)}}(e)}const n=e.dataset.id;n&&localStorage.setItem("insignia_animada_"+n,"true")},300))},800*t)})}o.disconnect()}})},{threshold:.3,rootMargin:"0px 0px -10% 0px"}),n=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const e=document.querySelectorAll('[data-nueva-insignia-especial="true"]');if(e.length>0){console.log("Iniciando animaciones de insignias especiales:",e.length);new Audio("/Gifs_videos_media/audios/desbloqueo.mp3").play().catch(e=>{console.log("No se pudo reproducir el audio especial:",e)}),e.forEach((e,t)=>{setTimeout(()=>{e.classList.remove("nueva-insignia-especial-pendiente"),e.classList.add("nueva-insignia-especial");const t=e.closest(".insignia-especial-contenedor");if(t){const e=t.querySelector(".confeti-especial");e&&function(e){const t=["#FFD700","#FFA500","#FFFF00","#FF8C00","#DAA520"];for(let o=0;o<75;o++){const o=document.createElement("div");o.className="confeti-especial-pieza",o.style.backgroundColor=t[Math.floor(Math.random()*t.length)],o.style.left=100*Math.random()+"%",o.style.animationDelay=2*Math.random()+"s",o.style.animationDuration=4*Math.random()+3+"s",e.appendChild(o)}}(e)}localStorage.setItem("insignia_especial_animada","true")},500*t)})}n.disconnect()}})},{threshold:.5,rootMargin:"0px 0px -5% 0px"});return e&&(o.observe(e),console.log("Observer de insignias regulares iniciado")),t&&(n.observe(t),console.log("Observer de insignias especiales iniciado")),!0}if(e())return;let t=0;const o=setInterval(()=>{t++,e()?clearInterval(o):t>=10&&(clearInterval(o),console.log("Máximo de intentos alcanzado. No se encontraron elementos de insignias."))},500)}function animarMensajeRegistro(){const e=document.getElementById("registroExitoso");e&&setTimeout(function(){e.classList.add("fadeOut"),setTimeout(function(){e.style.display="none"},500)},9500)}function ToggleMenuMobile(){const e=document.querySelector(".toggleMenu"),t=document.querySelector(".menuPrincipalMobile"),o=document.getElementById("CierreMenu");e&&t&&o&&(e.addEventListener("click",function(){t.style.display="block"}),o.addEventListener("click",function(){t.style.display="none"}))}function initCarousel(){const e=document.querySelector(".carousel-track-container");if(!e)return;const t=document.querySelector(".carousel-track");if(!t)return;const o=Array.from(document.querySelectorAll(".carousel-slide:not(.clone)"));if(0===o.length)return;const n=document.querySelector(".carousel-indicators"),r=document.getElementById("prevBtn"),a=document.getElementById("nextBtn");n.innerHTML="";let s,c,i=0,l=!1,d=!1;!function(){document.querySelectorAll(".carousel-slide.clone").forEach(e=>e.remove());const e=o[o.length-1].cloneNode(!0);e.classList.add("clone"),e.classList.add("clone-last"),t.insertBefore(e,t.firstChild);const n=o[0].cloneNode(!0);n.classList.add("clone"),n.classList.add("clone-first"),t.appendChild(n)}();const u=Array.from(document.querySelectorAll(".carousel-slide"));function f(t,o=!1){const n=u[t+1];if(!n)return;i=t;document.querySelectorAll(".indicator").forEach((e,o)=>{e.classList.toggle("active",o===t)});const r=n.offsetLeft-(e.offsetWidth-n.offsetWidth)/2;l=!0,e.scrollTo({left:r,behavior:o?"auto":"smooth"}),setTimeout(()=>{l=!1,m()},o?50:1e3)}function m(){const t=e.offsetWidth/2,n=e.scrollLeft,r=document.querySelector(".clone-last");if(r){const e=r.offsetLeft+r.offsetWidth/2;if(Math.abs(t+n-e)<50)return void setTimeout(()=>{f(o.length-1,!0)},100)}const a=document.querySelector(".clone-first");if(a){const e=a.offsetLeft+a.offsetWidth/2;if(Math.abs(t+n-e)<50)return void setTimeout(()=>{f(0,!0)},100)}}function g(){if(l||d)return;const t=e.offsetWidth/2,n=e.scrollLeft;let r=0,a=1/0;if(o.forEach((e,o)=>{const s=u[o+1],c=s.offsetLeft+s.offsetWidth/2-n,i=Math.abs(t-c);i<a&&(a=i,r=o)}),r!==i){i=r;document.querySelectorAll(".indicator").forEach((e,t)=>{e.classList.toggle("active",t===i)})}m()}function y(){window.carouselInterval&&clearInterval(window.carouselInterval),window.carouselInterval=setInterval(()=>{d||(i>=o.length-1?f(0):f(i+1))},5e3)}o.forEach((e,t)=>{const o=document.createElement("div");o.classList.add("indicator"),0===t&&o.classList.add("active"),o.addEventListener("click",()=>f(t)),n.appendChild(o)}),r&&r.addEventListener("click",()=>{f(i<=0?o.length-1:i-1)}),a&&a.addEventListener("click",()=>{i>=o.length-1?f(0):f(i+1)}),e.addEventListener("touchstart",e=>{s=e.touches[0].clientX,d=!0,window.carouselInterval&&clearInterval(window.carouselInterval)},{passive:!0}),e.addEventListener("touchmove",e=>{d&&(c=e.touches[0].clientX)},{passive:!0}),e.addEventListener("touchend",e=>{if(!d)return;c=e.changedTouches[0].clientX;const t=s-c;Math.abs(t)>50?t>0?i>=o.length-1?f(0):f(i+1):f(i<=0?o.length-1:i-1):f(i),d=!1,y()},{passive:!0}),e.addEventListener("scroll",()=>{l||d||(clearTimeout(window.scrollTimeout),window.scrollTimeout=setTimeout(g,150))}),f(0,!0),y()}function initInfiniteCarousel(){const e=document.querySelector(".carousel-track-container");if(!e)return;const t=document.querySelector(".carousel-track");if(!t)return;const o=Array.from(document.querySelectorAll(".carousel-slide:not(.clone)")).map(e=>({html:e.outerHTML,index:parseInt(e.dataset.index)}));if(0===o.length)return;const n=document.querySelector(".carousel-indicators"),r=document.getElementById("prevBtn"),a=document.getElementById("nextBtn");let s,c=0,i=!1,l=!1;function d(n=!0){t.innerHTML="";for(let e=-2;e<=2;e++){const n=((c+e)%o.length+o.length)%o.length,r=o[n],a=document.createElement("li");a.innerHTML=r.html.match(/<li[^>]*>(.*)<\/li>/s)[1],a.className="carousel-slide",a.dataset.index=n,a.dataset.position=e,t.appendChild(a)}n&&setTimeout(()=>{const o=t.children[2];if(o){const t=o.offsetLeft,n=o.offsetWidth,r=t-(e.offsetWidth-n)/2;e.style.scrollBehavior="auto",e.scrollLeft=r,setTimeout(()=>{e.style.scrollBehavior="smooth"},50)}},50)}function u(){if(i||l)return;const o=t.querySelectorAll(".carousel-slide");if(5!==o.length)return;const n=e.offsetWidth/2+e.scrollLeft;let r=2,a=1/0;if(o.forEach((e,t)=>{const o=e.offsetLeft+e.offsetWidth/2,s=Math.abs(o-n);s<a&&(a=s,r=t)}),r<=1){const e=parseInt(o[r].dataset.index);e!==c&&(c=e,f())}else if(r>=3){const e=parseInt(o[r].dataset.index);e!==c&&(c=e,f())}else{const e=parseInt(o[2].dataset.index);e!==c&&(c=e,h())}}function f(){i=!0,h(),d(!0),setTimeout(()=>{i=!1},200)}function m(){i||(c=(c+1)%o.length,h(),d(!0))}function g(){i||(c=(c-1+o.length)%o.length,h(),d(!0))}function y(e){i||e===c||(c=e,h(),d(!0))}function h(){if(!n)return;document.querySelectorAll(".indicator").forEach((e,t)=>{e.classList.toggle("active",t===c)})}function v(){window.carouselInterval&&clearInterval(window.carouselInterval),window.carouselInterval=setInterval(()=>{l||i||m()},5e3)}return r&&r.addEventListener("click",g),a&&a.addEventListener("click",m),e.addEventListener("touchstart",()=>{l=!0,window.carouselInterval&&clearInterval(window.carouselInterval)},{passive:!0}),e.addEventListener("touchend",()=>{setTimeout(()=>{l=!1,u(),v()},800)},{passive:!0}),e.addEventListener("scroll",()=>{l||i||(clearTimeout(s),s=setTimeout(()=>{l||u()},1e3))},{passive:!0}),n&&(n.innerHTML="",o.forEach((e,t)=>{const o=document.createElement("div");o.classList.add("indicator"),t===c&&o.classList.add("active"),o.addEventListener("click",()=>y(t)),n.appendChild(o)})),d(!0),v(),{next:m,prev:g,goTo:y,getCurrentIndex:()=>c}}function DesplegarNav(){const e=document.querySelectorAll(".NavDesplegable");if(0===e.length)return;const t=e[0].offsetTop,o=document.querySelector(".PrimerVista");function n(){const n=window.scrollY;e.forEach(e=>{n>=t?(e.classList.add("fixedNav"),o.style.paddingTop=`${e.offsetHeight}px`):(e.classList.remove("fixedNav"),o.style.paddingTop="0")})}n(),window.addEventListener("scroll",n)}function DesplegarUbicaciones(){const e=document.querySelectorAll(".elemento_anim");if(0===e.length)return;const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("visible"),t.unobserve(e.target))})},{threshold:.1});e.forEach(e=>{t.observe(e)})}function DesplegarChat(){const e=document.querySelector("#ChatBoton"),t=document.querySelector("#CerrarChat"),o=document.querySelector("#ChatContent");e&&e.addEventListener("click",function(){o.classList.toggle("visible")}),t&&t.addEventListener("click",function(){o.classList.remove("visible")})}function VerContra(){const e=document.querySelector("#togglePassword"),t=document.querySelector("#toggleConfirmPassword"),o=document.querySelector("#contrasena"),n=document.querySelector("#confirmar_contrasena"),r=document.querySelector(".toggle-password"),a=document.querySelector("#password");e&&o&&CambiarEstado(e,o),t&&n&&CambiarEstado(t,n),r&&a&&CambiarEstado(r,a)}function CambiarEstado(e,t){e.addEventListener("click",function(){const e="password"===t.type;t.type=e?"text":"password",this.textContent=e?"🙈":"👁️"})}function VentanaConsultaPorID(){if(document.querySelector("#MiniRecuadro")){const e=document.querySelector("#MiniRecuadro");document.body.style.overflow="hidden",e.onclick=cerrarModal}}function cerrarModal(){const e=document.querySelector("#MiniRecuadro"),t=document.querySelector("#MiniRecuadro2");e.classList.add("Eliminado"),t.classList.add("Eliminado"),document.body.style.overflow="";const o=window.location.origin+window.location.pathname;window.history.replaceState({},document.title,o)}window.addEventListener("pageshow",function(e){e.persisted&&(console.log("Página restaurada desde caché (navegación hacia atrás)"),setTimeout(forzarOcultarPreloader,100))}),document.addEventListener("DOMContentLoaded",function(){console.log("DOMContentLoaded - Iniciando preloader"),manejarPreloader(),document.addEventListener("click",function(e){const t=e.target.closest("a");if(t&&t.getAttribute("href")&&!t.getAttribute("href").startsWith("#")&&!t.getAttribute("href").startsWith("javascript:")&&!t.getAttribute("target")){console.log("Clic en enlace detectado, mostrando preloader");const e=document.getElementById("preloader"),t=document.querySelector(".Imgblanca");e&&(e.style.opacity="1",e.style.display="flex",e.classList.remove("ocultando")),t&&(t.style.display="block")}})}),window.addEventListener("beforeunload",function(){console.log("beforeunload - Forzando visibilidad del preloader");const e=document.getElementById("preloader"),t=document.querySelector(".Imgblanca");e&&(e.style.opacity="1",e.style.display="flex",e.classList.remove("ocultando")),t&&(t.style.display="block")}),window.addEventListener("load",function(){setTimeout(function(){preloaderActive&&forzarOcultarPreloader()},1e3)}),setTimeout(function(){const e=Date.now()-pageLoadStartTime;preloaderActive&&e>8e3&&forzarOcultarPreloader()},8e3);